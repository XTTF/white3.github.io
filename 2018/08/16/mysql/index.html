<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>MYSQL的学习 | 麦芽屋</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="[ MYSQL的学习 ] 简单介绍了一下使用及SQL注入的奇淫技巧，详细解释请自查手册文档等等.">
<meta name="keywords" content="MYSQL,笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="MYSQL的学习">
<meta property="og:url" content="white3.github.io/2018/08/16/mysql/index.html">
<meta property="og:site_name" content="麦芽屋">
<meta property="og:description" content="[ MYSQL的学习 ] 简单介绍了一下使用及SQL注入的奇淫技巧，详细解释请自查手册文档等等.">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-07-29T04:25:55.389Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MYSQL的学习">
<meta name="twitter:description" content="[ MYSQL的学习 ] 简单介绍了一下使用及SQL注入的奇淫技巧，详细解释请自查手册文档等等.">
  
    <link rel="alternate" href="/atom.xml" title="麦芽屋" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">麦芽屋</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">有趣的恶魔,无趣的枷锁</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="white3.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-mysql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/16/mysql/" class="article-date">
  <time datetime="2018-08-16T08:50:42.201Z" itemprop="datePublished">2018-08-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      MYSQL的学习
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[ MYSQL的学习 ] 简单介绍了一下使用及SQL注入的奇淫技巧，详细解释请自查手册文档等等.</p>
<a id="more"></a>
<h2 id="SQL注入的分类："><a href="#SQL注入的分类：" class="headerlink" title="SQL注入的分类："></a>SQL注入的分类：</h2><p><strong>基于从服务器接收到的响应</strong></p>
<ul>
<li style="list-style: none"><input type="checkbox"></input> 基于错误的SQL注入</li>
<li style="list-style: none"><input type="checkbox"></input> 联合查询的类型</li>
<li style="list-style: none"><input type="checkbox"></input> 堆查询注射</li>
<li style="list-style: none"><input type="checkbox"></input> SQL盲注 - 布尔盲注  - 时间盲注  - 报错盲注</li>
</ul>
<p><strong>基于如何处理输入的SQL查询</strong></p>
<ul>
<li style="list-style: none"><input type="checkbox"></input> 基于字符串</li>
<li style="list-style: none"><input type="checkbox"></input> 数字或整数为基础</li>
</ul>
<p><strong>基于程度和顺序的注入</strong></p>
<ul>
<li style="list-style: none"><input type="checkbox"></input> 一阶注射</li>
<li style="list-style: none"><input type="checkbox"></input> 二阶注射</li>
<li style="list-style: none"><input type="checkbox"></input> 通过用户输入的表单域的注射</li>
<li style="list-style: none"><input type="checkbox"></input> 通过cookie注射</li>
<li style="list-style: none"><input type="checkbox"></input> 通过服务器变量注射</li>
</ul>
<h2 id="DQL语言"><a href="#DQL语言" class="headerlink" title="DQL语言"></a>DQL语言</h2><p><strong>常用专业用语</strong></p>
<blockquote>
<p>DB：数据库 (Database)</p>
<p>DBMS：数据库管理系统 (Database Management System)</p>
<p>SQL：结构化查询语言，用于与数据库交互的语言</p>
<p>字段：数据表的列</p>
</blockquote>
<p><strong>常用SQL语句</strong></p>
<blockquote>
<p>查询所有数据库：show databases;</p>
<p>查询当前数据库中所有数据表：show tables;</p>
<p>查询某个表结构：desc [数据表名];</p>
<p>@@datadir：数据库路径</p>
<p>@@version_compile_os：操作系统版本</p>
</blockquote>
<p>注释符号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">单行注释：# 或 -- 或 /**/</span><br><span class="line">多行注释：--</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h3><h4 id="基础查询："><a href="#基础查询：" class="headerlink" title="基础查询："></a>基础查询：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">去重查询：  select distinct ... ;</span><br><span class="line">单字段查询：select [字段名称] from [表名称];</span><br><span class="line">多字段查询：select [字段名称], [字段名称] from [表名称];</span><br><span class="line">查询所有：  select * from [表名称];</span><br><span class="line">查询函数：  select [函数名称];</span><br><span class="line">查询表达式：select [运算公式];</span><br><span class="line">查询常量：  select [常量];</span><br></pre></td></tr></table></figure>
<p>取别名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. [原名称] as [新名称]</span><br><span class="line">2. [原名称]    [新名称]</span><br><span class="line">样例:</span><br><span class="line">select first_name hahaha, last_name as hehehehe from users;</span><br><span class="line">当新名称中含有特殊字符，请使用引号包裹起来如下:</span><br><span class="line">select uid as &quot;e eee&quot;, sex &quot;a aaa&quot; from users;</span><br></pre></td></tr></table></figure>
<p>操作符优先级(优先级高优先运算)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">:=</span><br><span class="line"></span><br><span class="line">||, OR, XOR</span><br><span class="line"></span><br><span class="line">&amp;&amp;, AND</span><br><span class="line"></span><br><span class="line">NOT</span><br><span class="line"></span><br><span class="line">BETWEEN, CASE, WHEN, THEN, ELSE</span><br><span class="line"></span><br><span class="line">=, &lt;=&gt;, &gt;=, &gt;, &lt;=, &lt;, &lt;&gt;, !=, IS, LIKE, REGEXP, IN</span><br><span class="line"></span><br><span class="line">|</span><br><span class="line"></span><br><span class="line">&amp;</span><br><span class="line"></span><br><span class="line">&lt;&lt;, &gt;&gt;</span><br><span class="line"></span><br><span class="line">-, +</span><br><span class="line"></span><br><span class="line">*, /, DIV, %, MOD</span><br><span class="line"></span><br><span class="line">^</span><br><span class="line"></span><br><span class="line">- (一元减号), ~ (一元比特反转)</span><br><span class="line"></span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">BINARY, COLLATE</span><br><span class="line"></span><br><span class="line">注意：若开启HIGH_NOT_PRECEDENCE SQL模式被激活，NOT的优先级与 ! 同级</span><br></pre></td></tr></table></figure>
<p>‘+’ 的作用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">仅为运算符</span><br><span class="line">1. 数值型 + 数值型 ：作加法运算</span><br><span class="line">2. 数值型 + 字符型 ：系统试图将字符型转换为数值型，若转换成功则加法运算，否则字符型值转换为0与数值型相加。</span><br><span class="line">3. 数值型 + null ：null，注意只要有null，便全为null</span><br></pre></td></tr></table></figure>
<p>拼接函数 CONCAT()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">返回结果为连接参数产生的字符串</span><br><span class="line">1. 如有任何一个参数为NULL ，则返回值为 NULL。</span><br><span class="line">2. 如果所有参数均为非二进制字符串，则结果为非二进制字符串。 </span><br><span class="line">3. 如果自变量中含有任一二进制字符串，则结果为一个二进制字符串。</span><br><span class="line">例如：</span><br><span class="line">select concat(-1,0,0.1,1);</span><br><span class="line">select concat(-1,&quot;null&quot;);</span><br><span class="line">select concat(&quot;-1&quot;,&quot;null&quot;);</span><br><span class="line">select concat(&quot;null&quot;,null);</span><br><span class="line">附加一个函数concat_ws()，把上面的SQL语句中的concat换成concat_ws试试</span><br></pre></td></tr></table></figure>
<h4 id="条件查询："><a href="#条件查询：" class="headerlink" title="条件查询："></a>条件查询：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select [查询列表] from [表名] where [筛选条件];</span><br></pre></td></tr></table></figure>
<p>条件表达式筛选：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; &lt; = != &lt;&gt; &gt;= &lt;=</span><br><span class="line">例：select id haha from users where id&gt;1 &amp;&amp; id!=2 &amp;&amp; id&lt;&gt;3 &amp;&amp; id&gt;=4 &amp;&amp; id&lt;=5 &amp;&amp; id&lt;6 || id=7;</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong><br><strong>&lt;=&gt; 为安全等于，这个操作符和=操作符执行相同的比较操作，不过在两个操作码均为NULL时，其所得值为1而不为NULL，而当一个操作码为NULL时，其所得值为0而不为NULL。</strong></p>
<p>逻辑表达式筛选：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&amp;&amp; ! || </span><br><span class="line">and or not</span><br><span class="line">例：select id haha from users where not (id=-1 and id=1 or !(id=2 || id=3) &amp;&amp; id&lt;&gt;4);</span><br></pre></td></tr></table></figure>
<p>模糊查询</p>
<ul>
<li>like </li>
</ul>
<p>与通配符搭配<br>% 百分号表示多字节通配<br>_ 下划线表示单字节通配<br>\ 斜杠表示转义符<br>注意：ESCAPE关键词可以指定某些符号为转义符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">例：</span><br><span class="line">查询名字第二个字符为&apos;_&apos;，第三个字符为&apos;%&apos;的字符串</span><br><span class="line">select * from users where username like &apos;_\_\%%&apos;;</span><br><span class="line">select * from users where username like &apos;_a_a%%&apos; ESCAPE &apos;a&apos;;</span><br></pre></td></tr></table></figure>
<ul>
<li>between and </li>
<li>In</li>
<li>is null</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">between [条件] and [条件]</span><br><span class="line">In [条件]</span><br><span class="line">is null [条件]</span><br><span class="line">例：</span><br><span class="line">查询 id 1-3的用户</span><br><span class="line">select * from users where id between 1 and &apos;3&apos;;</span><br><span class="line">select * from users where id in(&quot;1&quot;, 2, &apos;3&apos;);</span><br><span class="line">查询 id 为空的用户</span><br><span class="line">select * from users where email is null;</span><br></pre></td></tr></table></figure>
<h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><p>语法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select [查询列表] </span><br><span class="line">from [数据表] </span><br><span class="line">where [筛选条件] </span><br><span class="line">order by [排序列表] [asc|desc]</span><br><span class="line">注意：排序列表可以为表头，表示通过该字段排序，当为数字n时，表示通过当前查询的第n个字段来排序。比如下表结构中：select username from users order by 1; 表示通过username排序查询, 如果把 1 改为 2 则报错。而 select * from users order by 1; 表示通过 id 排序查询, 如果把 1 增加到 5 则报错。即如果数字超出查询字段的个数范围则报错。</span><br></pre></td></tr></table></figure>
<p>解释：asc为升序，desc为降序，默认为升序.<br>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">desc users; # 表结构如下</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br><span class="line">| id       | int(11)     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| username | varchar(20) | NO   |     | NULL    |                |</span><br><span class="line">| email    | varchar(50) | NO   |     | NULL    |                |</span><br><span class="line">| password | varchar(32) | NO   |     | NULL    |                |</span><br><span class="line">+----------+-------------+------+-----+---------+----------------+</span><br></pre></td></tr></table></figure>
<p>1.普通排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select username from users order by username asc;</span><br><span class="line">select username from users order by 1 asc;</span><br><span class="line">select username from users order by username;</span><br><span class="line">select username from users order by 1;</span><br><span class="line">select username from users order by username desc;</span><br><span class="line">select username from users order by 1 desc;</span><br></pre></td></tr></table></figure>
<p>2.表达式排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users order by (-id*id+4*id-6) asc;</span><br></pre></td></tr></table></figure>
<p>3.别名排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select username haha from users order by haha desc;</span><br></pre></td></tr></table></figure>
<p>4.函数排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users order by length(username) desc;</span><br></pre></td></tr></table></figure>
<p>5.多项排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users order by length(username) desc,username desc;</span><br></pre></td></tr></table></figure>
<h4 id="常见函数"><a href="#常见函数" class="headerlink" title="常见函数"></a><strong>常见函数</strong></h4><h5 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h5><p><strong>1.字符函数</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>函数作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>length()</td>
<td>返回字符串的长度</td>
</tr>
<tr>
<td>concat()</td>
<td>连接字符串</td>
</tr>
<tr>
<td>upper()</td>
<td>字符串变大写</td>
</tr>
<tr>
<td>lower()</td>
<td>字符串变小写</td>
</tr>
<tr>
<td>substr()</td>
<td>截取子串</td>
</tr>
<tr>
<td>substring()</td>
<td>截取子串</td>
</tr>
<tr>
<td>instr()</td>
<td>返回字串第一次出现的索引，如果找不到返回0</td>
</tr>
<tr>
<td>trim()</td>
<td>去前后空格</td>
</tr>
<tr>
<td>lpad()</td>
<td>左填充</td>
</tr>
<tr>
<td>rpad()</td>
<td>右填充</td>
</tr>
<tr>
<td>replace()</td>
<td>字符串替换</td>
</tr>
</tbody>
</table>
<p><strong>2.数学函数</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>函数作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>round()</td>
<td>四舍五入</td>
</tr>
<tr>
<td>ceil()</td>
<td>向上取整</td>
</tr>
<tr>
<td>floor()</td>
<td>向下取整</td>
</tr>
<tr>
<td>truncate()</td>
<td>截断</td>
</tr>
<tr>
<td>mod()</td>
<td>取余</td>
</tr>
<tr>
<td>rand()</td>
<td>返回0-1之间的小数</td>
</tr>
</tbody>
</table>
<p><strong>3.日期函数</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>函数作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>now()</td>
<td>返回系统当前日期 + 时间</td>
</tr>
<tr>
<td>curdate()</td>
<td>返回系统当前日期</td>
</tr>
<tr>
<td>curtime()</td>
<td>返回系统当前日期</td>
</tr>
<tr>
<td>month()</td>
<td>通过日期获取月份，同样的还有年（year），周（week），日（day），小时（hour），分钟（minute），秒（second）</td>
</tr>
<tr>
<td>monthname()</td>
<td>通过日期获取英文月份</td>
</tr>
<tr>
<td>date_format()</td>
<td>将日期转换为字符</td>
</tr>
<tr>
<td>str_to_date()</td>
<td>将日期格式的字符转换成为指定格式的日期，若格式不对则返回 null ，如str_to_date(‘4-20-2018’, ‘%m-%d-%Y’)</td>
</tr>
<tr>
<td>datediff()</td>
<td>返回两个日期相差的天数</td>
</tr>
</tbody>
</table>
<p>MYSQL中时间的格式符表</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>格式符</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>%Y</td>
<td>四位的年份</td>
</tr>
<tr>
<td>2</td>
<td>%y</td>
<td>两位的年份</td>
</tr>
<tr>
<td>3</td>
<td>%m</td>
<td>月份(01,02…11,12)</td>
</tr>
<tr>
<td>4</td>
<td>%c</td>
<td>月份(1,2…11,12)</td>
</tr>
<tr>
<td>5</td>
<td>%d</td>
<td>日(01,02…)</td>
</tr>
<tr>
<td>6</td>
<td>%H</td>
<td>小时(24小时制)</td>
</tr>
<tr>
<td>7</td>
<td>%h</td>
<td>小时(12小时制)</td>
</tr>
<tr>
<td>8</td>
<td>%i</td>
<td>分钟(00,01,…59)</td>
</tr>
<tr>
<td>9</td>
<td>%s</td>
<td>秒(00,01,…59)</td>
</tr>
</tbody>
</table>
<p><strong>4.其他函数</strong></p>
<table>
<thead>
<tr>
<th>函数名称</th>
<th>函数作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>user()</td>
<td>返回当前话路被验证的用户名和主机名组合。</td>
</tr>
<tr>
<td>database()</td>
<td>返回使用 utf8 字符集的默认(当前)数据库名。在存储程序里，默认数据库是同该程序向关联的数据库，但并不一定与调用语境的默认数据库相同。</td>
</tr>
<tr>
<td>version()</td>
<td>返回指示 MySQL 服务器版本的字符串。这个字符串使用 utf8 字符集。</td>
</tr>
<tr>
<td>password(‘str’)</td>
<td>加密并返回该字符</td>
</tr>
<tr>
<td>md5()</td>
<td>md5加密并返回</td>
</tr>
</tbody>
</table>
<p><strong>5.流程控制函数</strong></p>
<p>1&gt; if 函数：if else 的效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (条件表达式, 表达式1， 表达式2)</span><br><span class="line">如果条件表达式满足条件，则表达式1的值，否则表达式2的值</span><br></pre></td></tr></table></figure>
<p>例：select username, if(id&gt;1, ‘会员’, ‘非会员’) from users; # 若id &gt; 1为会员，反之没有，输出所有用户的会员情况</p>
<p>2&gt; case 函数的使用一：switch case 的效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1.</span><br><span class="line">case 要判断的字段或表达式</span><br><span class="line">when 常量1 then 要显示的值1或语句1</span><br><span class="line">when 常量2 then 要显示的值2或语句2</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n</span><br><span class="line">end</span><br><span class="line">2.</span><br><span class="line">case</span><br><span class="line">when 条件1 then 要显示的值1或语句1</span><br><span class="line">when 条件2 then 要显示的值2或语句2</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#exp1:</span><br><span class="line">select username, id, </span><br><span class="line">case id </span><br><span class="line">  when 0 then &apos;hahahaha&apos; </span><br><span class="line">  when 1 then &apos;hehehehe&apos; </span><br><span class="line">  else &apos;eeeeeeee&apos; </span><br><span class="line">end as &apos;o.o.o.o&apos; </span><br><span class="line">from users; </span><br><span class="line">#exp2:</span><br><span class="line">select username, id, </span><br><span class="line">case </span><br><span class="line">  when id&lt;1 then &apos;hahahaha&apos; </span><br><span class="line">  when id=1 then &apos;hehehehe&apos; </span><br><span class="line">  else &apos;eeeeeeee&apos; </span><br><span class="line">end as &apos;o.o.o.o&apos; </span><br><span class="line">from users;</span><br></pre></td></tr></table></figure>
<h5 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h5><p>用作统计使用，又称为聚合函数或统计函数或组函数。简单说就算，常用于分组查询的函数，且他们能处理NULL。</p>
<p>分类：</p>
<p>sum 求和、avg 平均值、max 最大值、min 最小值、count 计算个数</p>
<p>注意：一般sum 和 avg用于处理数值型，而max, min, count可以处理任何数据类型，count(字段)用于统计字段非空值的个数，count(*)常用于统计行数</p>
<p>简例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select sum(id), avg(id), max(id), count(*) from users;</span><br><span class="line">select sum(birthday), avg(birthday), max(birthday), count(*) from users;</span><br></pre></td></tr></table></figure>
<h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><p>语法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">5 select 分组函数, 分组后的字段</span><br><span class="line">1 from 表名称 </span><br><span class="line">2 [where 筛选条件]</span><br><span class="line">3 group by 分组的列表</span><br><span class="line">4 [having 分组后的筛选]</span><br><span class="line">6 [order by 子句]</span><br><span class="line">注意：查询列表必须特殊，要求是分组函数和group by后出现的字段，123456为筛选顺序</span><br></pre></td></tr></table></figure>
<p>注意：查询列表必须特殊，要求是分组函数和group by后出现的字段</p>
<ol>
<li>分组查询中的筛选条件分为两类</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th style="text-align:center">数据源</th>
<th style="text-align:center">位置</th>
<th style="text-align:center">关键字</th>
</tr>
</thead>
<tbody>
<tr>
<td>分组前筛选</td>
<td style="text-align:center">原始表</td>
<td style="text-align:center">group by 子句的前面</td>
<td style="text-align:center">where</td>
</tr>
<tr>
<td>分组后筛选</td>
<td style="text-align:center">分组后的结果集</td>
<td style="text-align:center">group by 子句的后面</td>
<td style="text-align:center">having</td>
</tr>
</tbody>
</table>
<p>分组函数做条件必然放在 having 中，且优先考虑能用分组前筛选的（效率高）</p>
<ol start="2">
<li>group by 子句支持单个字段分组，多个字段分组（多个字段之间用逗号隔开没有顺序要求），表达式或函数</li>
<li>添加排序，置于整个分组查询的最后</li>
</ol>
<h4 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h4><p>当需要同时查询多个表的数据使用。若无有效的连接条件，则为笛卡儿积</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select 字段1,字段2,...</span><br><span class="line">from 表1, 表2,...</span><br></pre></td></tr></table></figure>
<p>年代分类：</p>
<ul>
<li><strong>sql192版本</strong></li>
</ul>
<p>等值，非等值，自连接，也支持一部分外连接(用于oracle，sqlserver，mysql不支持)</p>
<p><strong>等值连接</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 [别名1],表2 [别名2],...</span><br><span class="line">where 表1.字段 = 表2.字段</span><br><span class="line">[and 筛选条件]</span><br><span class="line">[group by 分组字段]</span><br><span class="line">[having 分组后的筛选]</span><br><span class="line">[order by 排序字段]</span><br></pre></td></tr></table></figure>
<p>注意：<br>1.防止表字段名重复，通常给表起别名，也是为了缩短查询语句<br>2.多表无主从之分，即没有顺序<br>3.n表查询至少需要n-1个连接条件<br>4.查询结果为多表的交集部分</p>
<p><strong>非等值连接</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 [别名1],表2 [别名2],...</span><br><span class="line">where 非等值条件</span><br><span class="line">[and 筛选条件]</span><br><span class="line">[group by 分组字段]</span><br><span class="line">[having 分组后的筛选]</span><br><span class="line">[order by 排序字段]</span><br></pre></td></tr></table></figure>
<p><strong>自连接</strong></p>
<p>同上</p>
<ul>
<li><strong>sql199版本</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名 </span><br><span class="line">[连接类型关键字] join 表2 别名 </span><br><span class="line">on 连接条件</span><br><span class="line">[where 筛选条件]</span><br><span class="line">[group by 分组字段]</span><br><span class="line">[having 分组后的筛选]</span><br><span class="line">[order by 排序字段]</span><br></pre></td></tr></table></figure>
<p><strong>连接类型</strong></p>
<p><strong>内连接</strong>：可以理解为对两个表并集运算再加筛选条件，其中有等值连接，非等值连接，自连接，关键字为：inner<br>具体语法类型192版本，可省略 inner关键字，如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名 </span><br><span class="line">[inner] join 表2 别名 </span><br><span class="line">on 连接条件</span><br><span class="line">[where 筛选条件]</span><br><span class="line">[group by 分组字段]</span><br><span class="line">[having 分组后的筛选]</span><br><span class="line">[order by 排序字段]</span><br><span class="line">limit [子句]</span><br></pre></td></tr></table></figure>
<p><strong>外连接</strong>：outer<br>用于查询一个表中有，另一个表没有的记录。可以理解为对两个表交集运算再加筛选条件。<br>外连接查询的结果为主表中的所有记录<br>如果从表能与之匹配，则显示匹配的值<br>如果从表不能匹配他，则显示NULL<br>外连接查询的结果 = 内连接结果 + 主表中有而从表没有的记录，即</p>
<p>左外，left [outer] ，左为主表<br>右外，right [outer] ，右为主表，左外右外交换两个表的顺序可以实现相同效果<br>全外(mysql不支持) full [outer] ，全外连接 = 内连接的结果 + 表1中有而表2无 + 表2中有而表1无(或者说，全外连接 = 表1 U 表 2)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名 </span><br><span class="line">left|right|full [outer] join 表2 别名 </span><br><span class="line">on 连接条件</span><br><span class="line">[where 筛选条件]</span><br><span class="line">[group by 分组字段]</span><br><span class="line">[having 分组后的筛选]</span><br><span class="line">[order by 排序字段]</span><br><span class="line">limit [子句]</span><br></pre></td></tr></table></figure>
<p><strong>交叉连接</strong>：cross</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名</span><br><span class="line">cross join 表2 别名</span><br></pre></td></tr></table></figure>
<p>实质上就是笛卡儿积</p>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><h4 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h4><h4 id="查询总结"><a href="#查询总结" class="headerlink" title="查询总结"></a>查询总结</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="white3.github.io/2018/08/16/mysql/" data-id="cjkwbsim40012f4jtvn80z924" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MYSQL/">MYSQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/08/16/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CTF杂项/">CTF杂项</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CURL/">CURL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSP/">JSP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MIPS汇编/">MIPS汇编</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MYSQL/">MYSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PWN/">PWN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/install/">install</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/question/">question</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web安全/">web安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二进制/">二进制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内网/">内网</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础/">基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安装/">安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小文/">小文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/扫描/">扫描</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模板/">模板</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编码/">编码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程/">编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/配置/">配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CTF杂项/" style="font-size: 10px;">CTF杂项</a> <a href="/tags/CURL/" style="font-size: 10px;">CURL</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MIPS汇编/" style="font-size: 10px;">MIPS汇编</a> <a href="/tags/MYSQL/" style="font-size: 10px;">MYSQL</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/PWN/" style="font-size: 10px;">PWN</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/install/" style="font-size: 10px;">install</a> <a href="/tags/question/" style="font-size: 10px;">question</a> <a href="/tags/web安全/" style="font-size: 15px;">web安全</a> <a href="/tags/二进制/" style="font-size: 10px;">二进制</a> <a href="/tags/内网/" style="font-size: 10px;">内网</a> <a href="/tags/基础/" style="font-size: 10px;">基础</a> <a href="/tags/安装/" style="font-size: 10px;">安装</a> <a href="/tags/小文/" style="font-size: 10px;">小文</a> <a href="/tags/工具/" style="font-size: 15px;">工具</a> <a href="/tags/扫描/" style="font-size: 10px;">扫描</a> <a href="/tags/模板/" style="font-size: 20px;">模板</a> <a href="/tags/笔记/" style="font-size: 10px;">笔记</a> <a href="/tags/编码/" style="font-size: 15px;">编码</a> <a href="/tags/编程/" style="font-size: 10px;">编程</a> <a href="/tags/配置/" style="font-size: 10px;">配置</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/08/16/mysql/">MYSQL的学习</a>
          </li>
        
          <li>
            <a href="/2018/08/16/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2018/08/02/Linux的inode号/">Linux/unix上神奇的inode编号</a>
          </li>
        
          <li>
            <a href="/2018/07/29/PUNYCODE编码协议/">PUNYCODE</a>
          </li>
        
          <li>
            <a href="/2018/07/29/docker/">Docker基础学习</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Menzel3<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>